# Memory Block 管理规则

## 目的
为了在长篇写作中保持连贯性和一致性，将已完成的内容压缩成易于管理的“Memory Blocks (记忆块)”，以便模型在未来的步骤中引用，而无需读取完整的历史记录。

## 文件结构
- **位置**: `memory/` 目录。
- **命名**: `mem_ch[XX]_sec[YY].md` 或 `mem_ch[XX]_summary.md`。

## Memory Block 内容结构
每个记忆块必须包含以下部分：

1.  **剧情梗概 (Detailed Synopsis)**:
    -   按时间顺序总结所引用的部分的事件。
    -   角色采取的关键行动。
2.  **角色状态更新 (Character State Updates)**:
    -   生理状态（受伤、物品清单、位置、体力消耗）。 *[现实性原则]*
    -   情绪状态（当前心情、态度变化）。
    -   信息状态（角色获知了什么新信息，来源是什么）。 *[信息来源追踪]*
    -   关系动态（联盟或冲突的转变）。
3.  **情节线索 (Plot Threads)**:
    -   **已解决 (Resolved)**: 得到解答的问题或结束的冲突。
    -   **活跃中 (Active)**: 正在进行的谜团，当前的目标。
    -   **伏笔 (Foreshadowing)**: 留下的暗示，稍后通过需要呼应。
4.  **关键细节与一致性锚点 (Key Details & Consistency Anchors)**:
    -   必须保持一致的具体短语、物体描述或场景细节（例如，“他左脸颊上的伤疤”，“密码是‘青鸟’”）。
5.  **基调与风格参考 (Tone & Style Reference)**:
    -   关于主要氛围的简要说明（例如，“紧张、幽闭恐惧”或“轻松、喜剧”）。

## 创建流程 (压缩规则)
当一个部分的写作任务完成时：
1.  **输入**: 刚刚写完的章节全文 + 上一个 Memory Block。
2.  **行动**: 总结新文本，并在必要时将其与上一个块的上下文合并（或链接到它）。
3.  **输出**: 一个新的 Memory Block 文件。

## 使用规则
-   **读取**: 在撰写新内容之前，模型必须读取紧接的前一部分的 Memory Block 以及“全局大纲 (Global Plan)”或相关的“章节大纲 (Chapter Plan)”。
-   **无冗余**: 除非为了调试连贯性错误而特别需要，否则不要重新读取以前章节的完整原始文本。请依赖 Memory Blocks。
